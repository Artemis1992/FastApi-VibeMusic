# ==================== APP ====================
# Режим запуска: monolith | service
RUN_MODE=monolith

# Имя сервиса (если RUN_MODE=service)
SERVICE_NAME=api-gateway

# Окружение: development | staging | production
ENVIRONMENT=development

# Debug режим
DEBUG=true

# Уровень логирования: DEBUG | INFO | WARNING | ERROR
LOG_LEVEL=DEBUG

# ==================== DATABASE ====================
# PostgreSQL connection string
DATABASE_URL=postgresql+asyncpg://vibemusic:vibemusic_secret@localhost:5432/vibemusic

# Connection pool
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# ==================== REDIS ====================
REDIS_URL=redis://localhost:6379/0

# ==================== MINIO (S3-compatible) ====================
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET_AUDIO=vibemusic-audio
MINIO_BUCKET_IMAGES=vibemusic-images
MINIO_SECURE=false

# ==================== AUTH / JWT ====================
# ВАЖНО: Сгенерируй уникальный ключ для production!
# python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-super-secret-key-change-in-production

# Алгоритм JWT
ALGORITHM=HS256

# Время жизни токенов
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# ==================== CORS ====================
# Разделённые запятой origins
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# ==================== RATE LIMITING ====================
# Формат: "requests/period" (5/minute, 100/hour)
RATE_LIMIT_AUTH=5/minute
RATE_LIMIT_SEARCH=30/minute
RATE_LIMIT_DEFAULT=100/minute

# ==================== KAFKA (опционально, позже) ====================
# KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# KAFKA_CONSUMER_GROUP=vibemusic-consumer

# ==================== OBSERVABILITY ====================
# Prometheus metrics endpoint
METRICS_ENABLED=true

# OpenTelemetry (позже)
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
# OTEL_SERVICE_NAME=vibemusic-api

# ==================== FILE UPLOAD ====================
# Максимальный размер файлов
MAX_AUDIO_SIZE_MB=100
MAX_IMAGE_SIZE_MB=10

# Разрешённые типы файлов
ALLOWED_AUDIO_TYPES=audio/mpeg,audio/wav,audio/flac,audio/ogg
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp
